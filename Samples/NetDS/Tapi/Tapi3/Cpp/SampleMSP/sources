#
#
# Copyright (C) 1999  Microsoft Corporation.  All Rights Reserved.
#
#

TARGETNAME=sampmsp
TARGETPATH=obj
TARGETTYPE=DYNLINK

USE_RTTI=1
USE_CRTDLL=1
USE_ATL=1
USE_NATIVE_EH=1

!IF !$(FREEBUILD)
!IF defined (DEBUG_MEMORY)

# Use debug CRTs and turn on assertions.
DEBUG_CRTS=1
C_DEFINES=$(C_DEFINES) -D_DEBUG -D_DBG

# _CRTDBG_MAP_ALLOC: Map normal heap operations to their debug versions.
# DEBUG_HEAPS:       Activate code in our DllMain to activate leak checking.
C_DEFINES=$(C_DEFINES) -D_CRTDBG_MAP_ALLOC -DDEBUG_HEAPS

!ENDIF
!ENDIF

# Enable tracing.
C_DEFINES=$(C_DEFINES) -DMSPLOG

# Use unicode.
C_DEFINES=$(C_DEFINES) -DUNICODE

INCLUDES=\
    $(BASEDIR)\public\sdk\amovie\inc;

TARGETLIBS=\
    $(LIBRARY_PATH)\kernel32.lib \
    $(LIBRARY_PATH)\user32.lib \
    $(LIBRARY_PATH)\gdi32.lib \
    $(LIBRARY_PATH)\advapi32.lib \
    $(LIBRARY_PATH)\shell32.lib \
    $(LIBRARY_PATH)\ole32.lib \
    $(LIBRARY_PATH)\oleaut32.lib \
    $(LIBRARY_PATH)\uuid.lib \
    $(LIBRARY_PATH)\winmm.lib \
    $(LIBRARY_PATH)\t3iid.lib \
    $(LIBRARY_PATH)\mspid.lib \
    $(LIBRARY_PATH)\strmiids.lib \
    $(LIBRARY_PATH)\tmuid.lib \
    $(LIBRARY_PATH)\rtutils.lib \
    $(LIBRARY_PATH)\strmbase.lib \
    $(LIBRARY_PATH)\mspbase.lib

PRECOMPILED_INCLUDE=stdafx.h
PRECOMPILED_PCH=stdafx.pch
PRECOMPILED_OBJ=stdafx.obj
PRECOMPILED_CXX=1

SOURCES=\
    sampmsp.idl \
    sampmsp.rc \
    sampmsp.cpp \
    sampaddr.cpp \
    sampcall.cpp \
    sampstrm.cpp

DLLENTRY=_DllMainCRTStartup
